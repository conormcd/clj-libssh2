<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-libssh2.ssh documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-libssh2</span> <span class="project-version">0.1.89</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="Primary-API.html"><div class="inner"><span>The main clj-libssh2 API</span></div></a></li><li class="depth-1 "><a href="libssh2.html"><div class="inner"><span>libssh2 API</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-libssh2</span></div></div></li><li class="depth-2 branch"><a href="clj-libssh2.agent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>agent</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.authentication.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authentication</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.known-hosts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>known-hosts</span></div></a></li><li class="depth-2"><a href="clj-libssh2.libssh2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>libssh2</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.agent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>agent</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.keepalive.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keepalive</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.knownhost.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>knownhost</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.publickey.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>publickey</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.scp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scp</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-3 branch"><a href="clj-libssh2.libssh2.sftp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sftp</span></div></a></li><li class="depth-3"><a href="clj-libssh2.libssh2.userauth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>userauth</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.session.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="clj-libssh2.socket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>socket</span></div></a></li><li class="depth-2 current"><a href="clj-libssh2.ssh.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ssh</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-libssh2.ssh.html#var-exec"><div class="inner"><span>exec</span></div></a></li><li class="depth-1"><a href="clj-libssh2.ssh.html#var-with-session"><div class="inner"><span>with-session</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-libssh2.ssh</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-exec"><h3>exec</h3><div class="usage"><code>(exec session-or-host commandline &amp; {:as io})</code></div><div class="doc"><pre class="plaintext">Execute a command and get the results.

If you&apos;re executing a command and don&apos;t care about the output you should
redirect its output on the remote host to /dev/null. This function will
always read the output across the wire even if it won&apos;t be returned as this
is the only reliable way to wait for the exit status to be correctly set.

Arguments:

session-or-host  Either a valid clj-libssh2.session.Session object or a map
                 suitable for handing off to with-session.
commandline      The command which should be executed.

Optional keyword arguments:

:in  A String or an InputStream which will be fed to the standard input of
     the remote process. If you provide an InputStream which is an instance
     of PushbackInputStream you must ensure that the size of the
     PushbackInputStream equals or exceeds the :write-chunk-size for the
     session.
:out An OutputStream. The standard output of the remote process will be
     written to this stream. If this is nil, then output will be discarded.
     If this is not provided, then the output will be returned as a String.
:err An OutputStream which will be connected to the standard error of the
     remote process and in every other way behaves like :out.
:env A map of environment variables which will be set before the command is
     executed. The keys are the environment variable names. The values are
     the values for those variables. The setting of environment variables is
     controlled by the remote sshd and the value of its AcceptEnv
     configuration variable.

Return:

A map with the following keys and values.

:out     The output from standard output on the remote host. If you specify
         a (potentially nil) output stream in the arguments to this function
         then that output stream will be returned. If no output stream was
         provided then this value will be a String containing the output.
:err     The contents of standard error from the remote host, in the same
         way as :out was provided.
:exit    The exit code from the remote process.
:signal  A map with the keys :exit-signal :err-msg and :lang-tag which have
         the values from the similarly-named out arguments of
         libssh2_channel_get_exit_signal.</pre></div></div><div class="public anchor" id="var-with-session"><h3>with-session</h3><h4 class="type">macro</h4><div class="usage"><code>(with-session session session-or-host &amp; body)</code></div><div class="doc"><pre class="plaintext">Convenience macro for dealing with sessions.

Arguments:

session          This will be bound to a valid clj-libssh2.session.Session.
session-or-host  This is either a clj-libssh2.session.Session object (in
                 which case this macro simply binds it to session) or a map
                 describing a potential session (in which case this calls
                 clj-libssh2.session/with-session to create the session).</pre></div></div></div></body></html>